<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="cloud-web-app" style="background: lightblue;"><br />
        <div id="header" style="padding: 20px;">
            <h2 class="alert alert-info">Build a web application using Azure web service PaaS</h2>
            <h3>Overview</h3>
            <p>In this setup and configure data in a cloud storage account, deploy and test an API to access that data,
                and deploy a web application which accesses data delivered by the API.</p>
            <h3>Background</h3>
            <p>Microsoft provides many online learning resources for their popular certifications. You can see the list
                <a style="color: navy;" href="https://learn.microsoft.com/en-us/certifications/">here.
                    (learn.microsoft.com/en-us/certifications)</a></p>
            <p>The lab chosen for this module demonstrates typical service elements of an n-Tiered PaaS web application.
                There is separation between the data, the data access layer, the business logic, and the presentation
                layer. All of the code and the instructions are provided.</p>
            <p>The provided instructions are adapted from Microsoft's AZ-204 certificate training material.</p>
            <p>As you click through each of the tabs below, follow the steps and collect the required images. Read the
                instructions carefully. Ask questions along the way.</p>
            <p>In the final step of the exercise, you will delete the cloud resources you have deployed. It is
                recommended that you complete this lab in one session. Leaving the resources created will incur costs
                until they are removed. The exercise is designed to mnimize the expenses. All of the labs can be
                completed well within the trial user account allowance.</p>
        </div>
        <div id="architecture" style="padding: 20px;">
            <h2 class="alert alert-info">Architecture Diagram</h2>
            <p>Here is a picture of the system architecture that you will deploy.</p>
            <img src="https://github.com/MicrosoftLearning/AZ-204-DevelopingSolutionsforMicrosoftAzure/raw/master/Instructions/Labs/media/Lab01-Diagram.png"
                alt="System Architecture Diagram" />
        </div>
        <div id="summary" style="padding: 20px;">
            <p>Here is a list of the steps you will complete for this exercise.</p>
            <ol>
                <li>Build a back-end API by using Azure Storage and the Web Apps feature of Azure App Service
                    <ol>
                        <li>Open Azure portal</li>
                        <li>Create Storage account</li>
                        <li>Upload sample blob</li>
                        <li>Create a web app</li>
                        <li>Configure the web app</li>
                        <li>Deploy an ASP.NET web application to Web Apps</li>
                    </ol>
                </li>
                <li>Build a front-end web application by using Azure Web Apps
                    <ol>
                        <li>Create a web app</li>
                        <li>Configure a web app</li>
                        <li>Deploy an ASP.NET web application to Web Apps</li>
                    </ol>
                </li>
                <li>Clean up subscription
                    <ol>
                        <li>Azure Cloud Shell</li>
                        <li>Delete resource group(s)</li>
                        <li>Close active applications</li>
                    </ol>
                </li>
            </ol>
            <p>Objectives</p>
            <ul>
                <li>Create various apps by using App Service</li>
                <li>Configure application settings for an app</li>
                <li>Deploy apps by using Kudu, the Azure Command-Line Interface (CLI), and zip file deployment</li>
            </ul>
        </div>
        <div id="video" style="padding: 30px;">
            <p style="font-style: italic;">You can view this optional video by right-clicking this <a
                    style="color: navy;" href="https://youtu.be/UAnHqJSkmSY">link</a> (https://youtu.be/UAnHqJSkmSY) and
                select 'Open link in a new tab / new window'.</p>
        </div>
        <div id="tabs" class="enhanceable_content tabs">
            <p style="font-style: italic;">Click through each of the following tabs.</p>
            <a id="anchor1"></a>
            <ul>
                <li><a style="color: navy;" href="#prep">Getting Ready</a></li>
                <li><a style="color: navy;" href="#ex1">Ex.1 backend API</a></li>
                <li><a style="color: navy;" href="#ex2">Ex.2 front-end web app</a></li>
                <li><a style="color: navy;" href="#ex3">Finish</a></li>
            </ul>
            <div id="prep" style="padding: 20px;">
                <h2 class="alert alert-info">Before you get started</h2>
                <p>This exercise was adapted from the Microsoft learning materials hosted on GitHub for the AZ-204
                    certificate prep. These instructions were originally written with a dependency on a Microsoft
                    VM-hosted learning environment. Instead, you will be creating the web service directly from your
                    computing environment and using your cloud service account.</p>
                <p class="ic-flash-info">Cloud updates occur frequently, so you might encounter UI changes before this
                    training content updates. If this occurs, adapt to the changes, and then work through them in the
                    labs as needed.</p>
                <h3>Required Files</h3>
                <p>Check the list of what you will need to get started</p>
                <ul>
                    <li>Download and unzip the lab files: <a id="54924978" class="instructure_file_link inline_disabled"
                            title="Link" href="https://courses.sfcollege.edu/courses/486636/files/54924978?wrap=1"
                            target="_blank" rel="noopener"
                            data-api-endpoint="https://courses.sfcollege.edu/api/v1/courses/486636/files/54924978"
                            data-api-returntype="File">AzWebApp.zip</a></li>
                    <li>Log in to the Azure Portal</li>
                    <li>Microsoft Visual Studio or Visual Studio Code*</li>
                </ul>
                <p>No programming will be required for this exercise. The solution source code for this lab is provided.
                </p>
                <p>You can use either Visual Studio (Community Edition is fine), or Visual Studio Code. If either is
                    already installed, you can skip this step.</p>
                <p>Visual Studio Code is a free open source IDE. You can download it from the Microsoft download page.
                </p>
                <p>These instructions were written for use with Windows, using another platform should work with minor
                    adjustments. Let me know if you have questions or problems with any of the steps.</p>
                <p style="text-align: center; font-style: italic;">Go to the next tab to continue.</p>
            </div>
            <div id="ex1" style="padding: 20px;">
                <h2 class="alert alert-info">Exercise 1</h2>
                <h3>Backend API</h3>
                <p>Build a backend API by using the Azure Storage and the Web Apps feature of Azure App Service</p>
                <div id="ex1-task1">
                    <h4>Task 1: Open the Azure portal &nbsp;&nbsp; <span class="element_toggler btn" role="button"
                            aria-controls="ex1task1detail" aria-label="Toggler toggle list visibility"
                            aria-expanded="false"> show/hide detail </span></h4>
                    <div id="ex1task1detail" style="list-style: none; display: none;">
                        <ol>
                            <li>Browse* to the Azure portal (https://portal.azure.com), and sign in with your account.
                            </li>
                        </ol>
                        <p>(optional) Microsoft's instructions specify using the Microsoft Edge browser.</p>
                        <p>&nbsp;</p>
                    </div>
                </div>
                <div id="ex1-task2">
                    <h4>Task 2: Create a Storage account &nbsp;&nbsp; <span class="element_toggler btn" role="button"
                            aria-controls="ex1task2detail" aria-label="Toggler toggle list visibility"
                            aria-expanded="false"> show/hide detail </span></h4>
                    <div id="ex1task2detail" style="list-style: none; display: none;">
                        <ol>
                            <li>In the Azure portal, use the <strong> Search resources, services, and docs </strong>
                                text box to search for <strong>Storage Accounts</strong>, and then in the list of
                                results, select <strong>Storage Accounts</strong>.</li>
                            <li>On the&nbsp;<strong>Storage accounts</strong>&nbsp;blade, select <strong>+
                                    Create</strong>.</li>
                            <li>On the&nbsp;<strong>Create a storage account</strong>&nbsp;blade, on the
                                <strong>Basics</strong> tab, perform the following actions, and then select
                                <strong>Review</strong>
                                <table class="table table-striped">
                                    <caption>Storage Account Settings</caption>
                                    <thead>
                                        <tr>
                                            <th scope="col">Setting</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Subscription</strong> drop-down list</td>
                                            <td>Retain the default value</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Resource group</strong> section</td>
                                            <td>Select <strong>Create new</strong>, enter
                                                <strong>ManagedPlatform</strong>, and then select <strong>OK</strong>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><strong>Storage account name</strong>&nbsp;text box</td>
                                            <td>Enter <strong>imgstor</strong>_[yourname]_</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Region</strong> drop-down list</td>
                                            <td>Select <strong>(US) East US</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Performance</strong> section</td>
                                            <td>Select the <strong>Standard</strong> option</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Redundancy</strong> drop-down list</td>
                                            <td>Select <strong>Locally-redundant storage (LRS)</strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <br />
                                <div id="fig1" style="margin: 20px;">
                                    <p style="text-align: center;">Storage Account settings screenshot</p>
                                    <img src="https://courses.sfcollege.edu/courses/455772/files/46302676/preview"
                                        alt="Storage Account Settings"
                                        data-api-endpoint="https://courses.sfcollege.edu/api/v1/courses/455772/files/46302676"
                                        data-api-returntype="File" />
                                </div>
                            </li>
                            <li>On the <strong>Review</strong> tab, review the options that you selected during the
                                previous steps.</li>
                            <li><em>Updated: 21-Feb-2024</em> Remember these instructions are written for a live website
                                which is subject to change <em>all the time!</em><br />Last time I walked through this,
                                I also had to go to the Advanced tab and select: <strong>Allow enabling anonymous access
                                    on individual containers</strong> before <strong>Review</strong> and
                                <strong>Create</strong></li>
                            <li>Select <strong>Create</strong> to create the storage account by using your specified
                                configuration.<br /><em>Note: Wait for the create task to complete.</em></li>
                            <li>On the <strong>Overview blade,</strong> select the <strong>Go to resource</strong>
                                button to navigate to the blade of the newly created storage account.</li>
                            <li>On the&nbsp;<strong>Storage account</strong>&nbsp;blade, in the&nbsp;<strong>Security +
                                    networking</strong> section, select <strong>Access keys</strong>.</li>
                            <li>On the&nbsp;<strong>Access keys</strong>&nbsp;blade, select <strong>Show keys</strong>.
                            </li>
                            <li>Review any one of the keys, and then copy the value of either of
                                the&nbsp;<strong>Connection string</strong>&nbsp;boxes to the clipboard.<br /><em>
                                    **Note**: It doesn't matter which connection string you choose. They are
                                    interchangeable. </em></li>
                            <li>Paste the copied connection string value to a text editor. You'll need this later.
                                <em>Microsoft recommends Notepad.</em></li>
                        </ol>
                    </div>
                </div>
                <div id="ex1-task3">
                    <h4>Task 3: Upload a sample blob &nbsp;&nbsp; <span class="element_toggler btn" role="button"
                            aria-controls="ex1task3detail" aria-label="Toggler toggle list visibility"
                            aria-expanded="false"> show/hide detail </span></h4>
                    <div id="ex1task3detail" style="list-style: none; display: none;">
                        <p>Now that you have configured a <strong>Storage Account</strong> service, you can attach a
                            container and upload a <em>binary large object (blob),</em> in this case, image files.</p>
                        <ol>
                            <li>On the <strong>Storage Account</strong> blade, in the <strong>Data storage</strong>
                                section, select the <strong>Containers</strong> link.</li>
                            <li>On the <strong>Containers</strong> blade, select <strong>+ Container</strong>.</li>
                            <li>In the <strong>New container</strong> window, perform the following actions:
                                <table class="table table-striped">
                                    <caption>Create New Container</caption>
                                    <thead>
                                        <tr>
                                            <th scope="col">Setting</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Name</strong> text box</td>
                                            <td>Enter <strong>images</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Public access level</strong> list</td>
                                            <td>Select <strong>Blob (anonymous read access for blobs only)</strong>, and
                                                then select <strong>Create</strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </li>
                            <li>On the <strong>Containers</strong> blade, select the newly created
                                <strong>images</strong> container.</li>
                            <li>On the <strong>images</strong> blade, select <strong>Upload</strong>.</li>
                            <li>In the <strong>Upload blob</strong> window, perform the following actions:
                                <table class="table table-striped">
                                    <caption>upload</caption>
                                    <thead>
                                        <tr>
                                            <th scope="col">Setting</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Files</strong> section</td>
                                            <td>Select the <strong>Folder</strong> icon</td>
                                        </tr>
                                        <tr>
                                            <td><strong>File Explorer</strong> window</td>
                                            <td>unzip the downloaded file and select
                                                <strong>Images\\grilledcheese.jpg</strong>, and then select
                                                <strong>Open</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Overwrite if files already exist</strong> check box</td>
                                            <td>Ensure that the check box is selected, and then select
                                                <strong>Upload</strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p style="font-style: italic;">Note: Wait for the blob to upload before you continue.
                                </p>
                            </li>
                        </ol>
                    </div>
                </div>
                <div id="ex1-task4">
                    <h4>Task 4: Create a web app &nbsp;&nbsp; <span class="element_toggler btn" role="button"
                            aria-controls="ex1task4detail" aria-label="Toggler toggle list visibility"
                            aria-expanded="false"> show/hide detail </span></h4>
                    <div id="ex1task4detail" style="list-style: none; display: none;">
                        <ol>
                            <li>On the Azure portal's navigation pane, select <strong>Create a resource</strong>.</li>
                            <li>On the <strong>Create a resource</strong> blade, in the <strong>Search services and
                                    marketplace</strong> text box, enter <strong>Web App</strong>, and then select
                                Enter.</li>
                            <li>On the <strong>Marketplace</strong> search results blade, select the <strong>Web
                                    App</strong> result.</li>
                            <li>On the <strong>Web App</strong> blade, select <strong>Create</strong>.</li>
                            <li>On the <strong>Create Web App</strong> blade, on the <strong>Basics</strong> tab,
                                perform the following actions, and then select the <strong>Monitoring</strong> tab:
                                <table class="table table-striped">
                                    <caption>Create Web App settings</caption>
                                    <thead>
                                        <tr>
                                            <th scope="col">Setting</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Subscription</strong> drop-down list</td>
                                            <td>Retain the default value</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Resource group</strong> section</td>
                                            <td>Select <strong>ManagedPlatform</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Name</strong>&nbsp;text box</td>
                                            <td>Enter <strong>imgapi</strong>_[yourname]_</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Publish</strong> section</td>
                                            <td>Select <strong>Code</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Runtime stack</strong> drop-down list</td>
                                            <td>Select <strong>.NET 6 (LTS)</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Operating System</strong> section</td>
                                            <td>Select <strong>Windows</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Region</strong> drop-down list</td>
                                            <td>Select the <strong>East US</strong> region</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Windows Plan (East US)</strong> section</td>
                                            <td>Select <strong>Create new</strong>, enter the value
                                                <strong>ManagedPlan</strong> in the <strong>Name</strong> text box, and
                                                then select <strong>OK</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>SKU and size</strong> section</td>
                                            <td>Retain the default value</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p>Create Web App settings</p>
                                <p>Note: try the selection menu drop-down in the Pricing Plan.</p>
                                <img style="margin-left: auto; margin-right: auto;"
                                    src="https://courses.sfcollege.edu/courses/455772/files/46302944/preview"
                                    alt="Web App Pricing Plans" width="400"
                                    data-api-endpoint="https://courses.sfcollege.edu/api/v1/courses/455772/files/46302944"
                                    data-api-returntype="File" />
                                <p>The default setting for the App will work fine. There is a <strong>Free (F1)</strong>
                                    setting. Here it indicates 60 CPU Minutes/day. For development and testing that is
                                    usually plenty. You can always scale it up later.</p>
                                <p class="ic-flash-info">Always check the defaults.</p>
                                <p>Also, changing the region will usually have a big impact on estimated cost.</p>
                                <img style="margin-left: auto; margin-right: auto;"
                                    src="https://courses.sfcollege.edu/courses/455772/files/46302946/preview"
                                    alt="web app settings" width="400"
                                    data-api-endpoint="https://courses.sfcollege.edu/api/v1/courses/455772/files/46302946"
                                    data-api-returntype="File" />
                            </li>
                            <li>On the <strong>Monitoring</strong> tab, in the <strong>Enable Application
                                    Insights</strong> section, select <strong>No</strong>, and then select
                                <strong>Review + create</strong>.</li>
                            <li>On the <strong>Review + create</strong> tab, review the options that you selected during
                                the previous steps.</li>
                            <li>Select <strong>Create</strong> to create the web app by using your specified
                                configuration.<br /><span style="font-style: italic;"> Note: Wait for the web app to be
                                    created before you continue with this lab. </span></li>
                            <li>On the <strong>Overview</strong> blade, select the <strong>Go to resource</strong>
                                button to navigate to the blade of the newly created web app.</li>
                        </ol>
                    </div>
                </div>
                <div id="ex1-task5">
                    <h4>Task 5: Configure the web app &nbsp;&nbsp; <span class="element_toggler btn" role="button"
                            aria-controls="ex1task5detail" aria-label="Toggler toggle list visibility"
                            aria-expanded="false"> show/hide detail </span></h4>
                    <div id="ex1task5detail" style="list-style: none; display: none;">
                        <ol>
                            <li>On the <strong>App Service</strong> blade, in the <strong>Settings</strong> section,
                                select the <strong>Configuration</strong> link.</li>
                            <li>In the <strong>Configuration</strong> section, perform the following actions, select
                                <strong>Save</strong>, and then select <strong>Continue</strong>.
                                <table class="table table-striped">
                                    <caption>web app settings</caption>
                                    <thead>
                                        <tr>
                                            <th scope="col">Setting</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Application settings</strong> tab</td>
                                            <td>Select <strong>New application setting</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Add/Edit application setting</strong> pop-up dialog</td>
                                            <td>In the <strong>Name</strong> text box, enter
                                                <strong>StorageConnectionString</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Value</strong> text box</td>
                                            <td>Paste the storage connection string that you previously copied to
                                                Notepad</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Deployment slot setting</strong> text box</td>
                                            <td>Keep the default value, and then select <strong>OK</strong> to close the
                                                pop-up dialog and return to the <strong>Configuration</strong> section
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <span style="font-style: italic;"> Be sure to <strong>Save</strong> your changes and
                                    wait for your application settings to save before you continue. </span>
                            </li>
                            <li>On the <strong>App Service</strong> blade in the <strong>Settings</strong> section,
                                select the <strong>Properties</strong> link.</li>
                            <li>In the <strong>Properties</strong> section, copy the value of the <strong>URL</strong>
                                hyperlink, and then paste it to Notepad. You'll use this value later in the
                                lab.<br /><span style="font-style: italic;"> <strong>Note</strong>: At this point, the
                                    web server at this URL will return a placeholder webpage. You haven't deployed any
                                    code to the Web App yet. You'll deploy code to the Web App later in this lab.
                                </span></li>
                        </ol>
                    </div>
                </div>
                <div id="ex1-task6">
                    <h4>Task 6: Deploy an ASP.NET web application to Web Apps &nbsp;&nbsp; <span
                            class="element_toggler btn" role="button" aria-controls="ex1task6detail"
                            aria-label="Toggler toggle list visibility" aria-expanded="false"> show/hide detail </span>
                    </h4>
                    <div id="ex1task6detail" style="list-style: none; display: none;">
                        <ol>
                            <li>Start Visual Studio (or Visual Studio Code)</li>
                            <li>On the <strong>File</strong> menu, select <strong>Open Folder</strong></li>
                            <li>In the <strong>File Explorer</strong> window, browse to the <strong>API</strong> folder
                                from the downloaded (unzipped) zipfile, and then select <strong>Select
                                    Folder</strong><br /><i> <strong>Note</strong>: Ignore any prompts to add required
                                    assets to build and debug and to run the restore command to address unresolved
                                    dependencies. </i></li>
                            <li>On the&nbsp;<strong>Explorer</strong>&nbsp;pane of the <strong> Visual Studio
                                    Code</strong> window, expand the&nbsp;<strong>Controllers</strong> folder, and then
                                select the <strong>ImagesController.cs</strong> file to open the file in the editor.
                            </li>
                            <li>In the editor, in the <strong>ImagesController</strong> class on line 26, observe the
                                <strong>GetCloudBlobContainer</strong> method and the code used to retrieve a container.
                            </li>
                            <li>In the <strong>ImagesController</strong> class on line 36, observe the
                                <strong>Get</strong> method and the code used to retrieve all blobs asynchronously from
                                the <strong>images</strong> container.</li>
                            <li>In the <strong>ImagesController</strong> class on line 55, observe the
                                <strong>Post</strong> method and the code used to persist an uploaded image to Storage.
                            </li>
                            <li>Sign in to the Azure Command-Line Interface (CLI) by entering<br />
                                <pre>az login</pre>
                                <br />at the Windows command line.<br />If you get response that the cmd is not
                                recognized, you need to install the Azure CLI. Get more information at
                                https://learn.microsoft.com/en-us/cli/azure/install-azure-cli. <br />Downloading and
                                running the installer does not take long.<br />When you login, the command will launch a
                                browser to finish the sign in, when it is successful, you can close the browser.
                            </li>
                            <li>Return to the currently open Windows terminal <strong>Command Prompt</strong> (or
                                Powershell) window. Wait for the sign-in process to finish.</li>
                            <li>At the command prompt, enter the following command, and then select Enter to list all
                                the apps in your **ManagedPlatform** resource group:<br />
                                <pre>az webapp list --resource-group ManagedPlatform</pre>
                                <p class="ic-flash-info"><strong>Error:</strong> If you the command returns: Resource
                                    group 'ManagedPlatform' could not be found<br />Check that the resource group name
                                    matches of if you have multiple subscriptions, change the current subscription to
                                    the correct one.<br />azure config set --subscription &lt;SubscriptionName&gt;</p>
                                <p>&nbsp;</p>
                                <p class="ic-flash-info"><em>12-Feb-2024</em> another update! (loving this!) If you have
                                    multiple accounts (I do) az config set ... doesn't work the same way anymore (it's
                                    listed as experimental) try using
                                    <code>az account set --subscription "[subscr-id]"</code> instead.</p>
                                for more see https://learn.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest
                            </li>
                            <li>Enter the following command, and then select Enter to find the apps that have the
                                <strong>imgapi\\*</strong> prefix:<br />
                                <pre>az webapp list --resource-group ManagedPlatform --query "[?starts_with(name, 'imgapi')]"</pre>
                            </li>
                            <li>Enter the following command, and then select Enter to render only the name of the single
                                app that has the <strong>imgapi\*</strong> prefix:<br />
                                <pre>az webapp list --resource-group ManagedPlatform --query "[?starts_with(name, 'imgapi')].{Name:name}" --output tsv</pre>
                            </li>
                            <li>Change the current directory to the location of the <strong>API</strong> folder that
                                contains the lab files</li>
                            <li>To deploy the <strong>api.zip</strong> file to the new web app that you created,
                                Enter:<br />
                                <pre>az webapp deployment source config-zip --resource-group ManagedPlatform --src api.zip --name &lt;name-of-your-api-app&gt;</pre>
                                <br /><i> <strong>Note</strong>: Replace the &lt;name-of-your-api-app\&gt; placeholder
                                    with the name of the web app that you created previously in this lab. You queried
                                    this app&rsquo;s name in the previous steps.<br />Wait for the deployment to
                                    complete before you continue with this lab. </i>
                            </li>
                            <li>On the Azure portal's <strong>navigation</strong> pane, select the <strong>Resource
                                    groups</strong> link.</li>
                            <li>On the <strong>Resource groups</strong> blade, select the
                                <strong>ManagedPlatform</strong> resource group that you created previously in this lab.
                            </li>
                            <li>On the <strong>ManagedPlatform</strong> blade, select the
                                <strong>imgapi</strong><i>[yourname]</i> web app that you created previously in this
                                lab.</li>
                            <li>From the <strong>App Service</strong> blade, select <strong>Browse</strong><br /><i>
                                    <strong>Note</strong>: The <strong>Browse</strong> command will perform a GET
                                    request to the root of the website, which returns a JavaScript Object Notation
                                    (JSON) array. This array should contain the URL for your single uploaded image in
                                    your Storage account. </i></li>
                        </ol>
                    </div>
                </div>
                <h3 class="alert alert-info">Review</h3>
                In this exercise, you:
                <ul>
                    <li>created a storage account with a container and seeded it with data.</li>
                    <li>created web app in Azure, and then deployed your ASP.NET web application to Web Apps by using
                        the Azure CLI and Apache Kudu zip file deployment utility.</li>
                    <li>tested and demonstrated the functionality of the new custom API</li>
                </ul>
                <p>&nbsp;</p>
                <div class="ic-flash-info" style="background-color: yellow;">
                    <p>From the command line, run the command <code>curl &lt;url&gt;</code> where <em>&lt;url&gt;</em>
                        is the full url to your API(https://...)</p>
                    <p>Take a screenshot of the output AND the URL from your browser window. Save this for later.</p>
                </div>
                <p>The example is the output from Windows Powershell. The detail and format will look different on your
                    configuration.</p>
                <p>All of these steps have been tested on Windows 11 and MacOS.</p>
                <p><img style="margin-left: auto; margin-right: auto;"
                        src="https://courses.sfcollege.edu/courses/455772/files/46306478/preview" alt="API return"
                        width="400"
                        data-api-endpoint="https://courses.sfcollege.edu/api/v1/courses/455772/files/46306478"
                        data-api-returntype="File" /></p>
                <p style="text-align: center; font-style: italic;">Go to the next tab to continue.</p>
            </div>
            <div id="ex2" style="padding: 20px;">
                <h2 class="alert alert-info">Exercise 2</h2>
                <h3>Build a front-end web application by using Azure Web Apps</h3>
                <div id="ex2-task1">
                    <h4>Task 1: Create a web app &nbsp;&nbsp; <span class="element_toggler btn" role="button"
                            aria-controls="ex2task1detail" aria-label="Toggler toggle list visibility"
                            aria-expanded="false"> show/hide detail </span></h4>
                    <div id="ex2task1detail" style="list-style: none; display: none;">
                        <ol>
                            <li>
                                <p>On the Azure portal's <strong>navigation</strong> pane, select <strong>Create a
                                        resource</strong>.</p>
                            </li>
                            <li>
                                <p>On the <strong>Create a resource</strong> blade, in the <strong>Search services and
                                        marketplace</strong> text box, enter <strong>Web App</strong>, and then select
                                    Enter.</p>
                            </li>
                            <li>
                                <p>On the <strong>Marketplace</strong> search results blade, select <strong>Web
                                        App</strong>.</p>
                            </li>
                            <li>
                                <p>On the <strong>Web App</strong> blade, select <strong>Create</strong>.</p>
                            </li>
                            <li>
                                <p>On the <strong>Create Web App</strong> blade, on the <strong>Basics</strong> tab,
                                    perform the following actions, and then select the <strong>Monitoring</strong> tab:
                                </p>
                                <table class="table table-striped">
                                    <caption>web app settings</caption>
                                    <thead>
                                        <tr>
                                            <th scope="col">Setting</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Subscription</strong>drop-down list</td>
                                            <td>Retain the default value</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Resource group</strong>section</td>
                                            <td>Select<strong> ManagedPlatform</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Name</strong>&nbsp;text box</td>
                                            <td>Enter <strong>imgweb</strong><em>[yourname]</em></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Publish</strong> section</td>
                                            <td>Select <strong>Code</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Runtime stack</strong> drop-down list</td>
                                            <td>Select <strong>.NET 6 (LTS)</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Operating System</strong> section</td>
                                            <td>Select <strong>Windows</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Region</strong> drop-down list</td>
                                            <td>Select the <strong>East US</strong> region</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Windows Plan (East US)</strong> section</td>
                                            <td>Select <strong>ManagedPlan (S1)</strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p>The following screenshot displays the configured settings on the <strong>Create web
                                        app</strong> blade.</p>
                                <blockquote>
                                    <p><span class="color-fg-accent">Note</span>: As discussed, you can select different
                                        service plans and regions to change the operating cost. The FREE tier (F1) is
                                        more than adequate for most development applications.</p>
                                </blockquote>
                                <img src="https://github.com/MicrosoftLearning/AZ-204-DevelopingSolutionsforMicrosoftAzure/raw/master/Instructions/Labs/media/l01_create_a_front_end_web_app.png"
                                    alt="Create web app blade" />
                            </li>
                            <li>
                                <p>On the <strong>Monitoring</strong> tab, in the <strong>Enable Application
                                        Insights</strong> section, select <strong>No</strong>, and then select
                                    <strong>Review + create</strong>.</p>
                            </li>
                            <li>
                                <p>From the <strong>Review + create</strong> tab, review the options that you selected
                                    during the previous steps.</p>
                            </li>
                            <li>
                                <p>Select <strong>Create</strong> to create the web app by using your specified
                                    configuration.</p>
                                <blockquote>
                                    <p><span class="color-fg-accent">Note</span>: Wait for the creation task to complete
                                        before you continue with this lab.</p>
                                </blockquote>
                            </li>
                            <li>
                                <p>On the <strong>Overview</strong> blade, select the <strong>Go to resource</strong>
                                    button to navigate to the blade of the newly created web app.</p>
                            </li>
                        </ol>
                    </div>
                </div>
                <div id="ex2-task2">
                    <h4>Task 2: Configure a web app &nbsp;&nbsp; <span class="element_toggler btn" role="button"
                            aria-controls="ex2task2detail" aria-label="Toggler toggle list visibility"
                            aria-expanded="false"> show/hide detail </span></h4>
                    <div id="ex2task2detail" style="list-style: none; display: none;">
                        <ol>
                            <li>
                                <p>On the <strong>App Service</strong> blade, in the <strong>Settings</strong> section,
                                    select the <strong>Configuration</strong> link.</p>
                            </li>
                            <li>
                                <p>In the <strong>Configuration</strong> section, perform the following actions, select
                                    <strong>Save</strong>, and then select <strong>Continue</strong>:</p>
                                <table class="table table-striped">
                                    <caption>App Setting configuration</caption>
                                    <thead>
                                        <tr>
                                            <th scope="col">Setting</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Application settings</strong> tab</td>
                                            <td>Select <strong>New application setting</strong></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Add/Edit application setting</strong> pop-up dialog</td>
                                            <td>In the <strong>Name</strong> text box, enter <strong>ApiUrl</strong>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><strong>Value</strong> text box</td>
                                            <td>Enter the web app URL that you copied previously in this lab.
                                                <strong>Note</strong>: Make sure you include the protocol
                                                <strong>https://</strong>, in the URL that you copy into the
                                                <strong>Value</strong> text box for this application setting</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Deployment slot setting</strong> text box</td>
                                            <td>Retain the default value, and then select <strong>OK</strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <blockquote>
                                    <p><span class="color-fg-accent">Note</span>: Wait for the application settings to
                                        save before you continue with this lab.</p>
                                </blockquote>
                            </li>
                        </ol>
                    </div>
                </div>
                <div id="ex2-task3">
                    <h4>Task 3: Deploy web app &nbsp;&nbsp; <span class="element_toggler btn" role="button"
                            aria-controls="ex2task3detail" aria-label="Toggler toggle list visibility"
                            aria-expanded="false"> show/hide detail </span></h4>
                    <div id="ex2task3detail" style="list-style: none; display: none;">
                        <h4>Task 3: Deploy an <code>ASP.NET</code> web application to Web Apps</h4>
                        <ol>
                            <li>
                                <p>Open <strong>Visual Studio Code</strong> and <strong>Open Folder</strong> from the
                                    <strong>File</strong> menu</p>
                            </li>
                            <li>
                                <p>Go to the <strong>Web</strong> folder from the project data and <strong>Select
                                        Folder</strong>.</p>
                                <blockquote>
                                    <p><span class="color-fg-accent">Note</span>: Ignore any prompts to add required
                                        assets to build and debug and to run the restore command to address unresolved
                                        dependencies.</p>
                                </blockquote>
                            </li>
                            <li>
                                <p>On the <strong>Explorer</strong> pane of the <strong>Visual Studio Code</strong>
                                    window, expand the <strong>Pages</strong> folder, and then select the
                                    <strong>Index.cshtml.cs</strong> file to open the file in the editor.</p>
                            </li>
                            <li>
                                <p>In the editor, in the <strong>IndexModel</strong> class on line 30, observe the
                                    <strong>OnGetAsync</strong> method and the code used to retrieve the list of images
                                    from the API.</p>
                            </li>
                            <li>
                                <p>In the <strong>IndexModel</strong> class on line 41, observe the
                                    <strong>OnPostAsync</strong> method and the code used to stream an uploaded image to
                                    the backend API.</p>
                            </li>
                            <li>
                                <p>login from a command prompt.</p>
                                <div class="snippet-clipboard-content notranslate position-relative overflow-auto">
                                    <pre class="notranslate"><code>az login
    </code></pre>
                                </div>
                            </li>
                            <li>
                                <p>Enter your account credentials in the browser and select <strong>Sign in</strong>.
                                </p>
                            </li>
                            <li>
                                <p>Return to the <strong>Command Prompt</strong> window. Wait for the sign-in process to
                                    finish.</p>
                            </li>
                            <li>
                                <p>Enter the following command, and then select Enter to list all the apps in your
                                    <strong>ManagedPlatform</strong> resource group:</p>
                                <div class="snippet-clipboard-content notranslate position-relative overflow-auto">
                                    <pre class="notranslate"><code>az webapp list --resource-group ManagedPlatform
    </code></pre>
                                </div>
                            </li>
                            <li>
                                <p>Enter the following command, and then select Enter to find the apps that have the
                                    <strong>imgweb*</strong> prefix:</p>
                                <div class="snippet-clipboard-content notranslate position-relative overflow-auto">
                                    <pre class="notranslate"><code>az webapp list --resource-group ManagedPlatform --query "[?starts_with(name, 'imgweb')]"
    </code></pre>
                                </div>
                            </li>
                            <li>
                                <p>Enter the following command, and then select Enter to render only the name of the
                                    single app that has the <strong>imgweb*</strong> prefix:</p>
                                <div class="snippet-clipboard-content notranslate position-relative overflow-auto">
                                    <pre class="notranslate"><code>az webapp list --resource-group ManagedPlatform --query "[?starts_with(name, 'imgweb')].{Name:name}" --output tsv
    </code></pre>
                                </div>
                            </li>
                            <li>
                                <p>Set the current directory to the <strong>Web/</strong> folder from the downloaded
                                    (and unzipped) data file. Enter the following command, and then select Enter to
                                    deploy the <strong>web.zip</strong> file to the new Azure web app</p>
                                <div class="snippet-clipboard-content notranslate position-relative overflow-auto">
                                    <pre class="notranslate"><code>az webapp deployment source config-zip --resource-group ManagedPlatform --src web.zip --name &lt;name-of-your-web-app&gt;
    </code></pre>
                                </div>
                                <blockquote>
                                    <p><span class="color-fg-accent">Note</span>: Replace the
                                        <em>&lt;name-of-your-web-app&gt;</em> placeholder with the name of the web app
                                        that you created previously in this lab. You recently queried this app&rsquo;s
                                        name in the previous steps.</p>
                                </blockquote>
                                <p>Wait for the deployment to complete before you continue with this lab.</p>
                            </li>
                            <li>
                                <p>On the Azure portal's <strong>navigation</strong> pane, select <strong>Resource
                                        groups</strong>.</p>
                            </li>
                            <li>
                                <p>On the <strong>Resource groups</strong> blade, select the
                                    <strong>ManagedPlatform</strong> resource group that you created previously in this
                                    lab.</p>
                            </li>
                            <li>
                                <p>On the <strong>ManagedPlatform</strong> blade, select the
                                    <strong>imgweb</strong><em>[yourname]</em> web app that you created previously in
                                    this lab.</p>
                            </li>
                            <li>
                                <p>On the <strong>App Service</strong> blade, select <strong>Browse</strong>.</p>
                            </li>
                            <li>
                                <p>Observe the list of images in the gallery. The gallery should list a single image
                                    that was uploaded to Storage previously in the lab.</p>
                            </li>
                            <li>
                                <p>In the <strong>Contoso Photo Gallery</strong> webpage, in the <strong>Upload a new
                                        image</strong> section, perform the following actions:</p>
                                <p>a. Select <strong>Browse</strong>.</p>
                                <p>b. In the <strong>File Explorer</strong> window, browse to <strong>Allfiles
                                        (F):\Allfiles\Labs\01\Starter\Images</strong>, select the
                                    <strong>bahnmi.jpg</strong> file, and then select <strong>Open</strong>.</p>
                                <p>c. Select <strong>Upload</strong>.</p>
                            </li>
                            <li>
                                <p>Observe that the list of gallery images has updated with your new image.</p>
                                <blockquote>
                                    <p><span class="color-fg-accent">Note</span>: In some rare cases, you might need to
                                        refresh your browser window to retrieve the new image.</p>
                                </blockquote>
                            </li>
                            <li>
                                <p>Repeat and upload each of the files from the Images folder</p>
                            </li>
                        </ol>
                    </div>
                </div>
                <h4>Review</h4>
                <p>In this exercise, you created an Azure web app and deployed an existing web application&rsquo;s code
                    to the resource in the cloud.</p>
                <p class="ic-flash-info" style="background-color: yellow; padding: 20px;">Take a screenshot of the
                    webapp output AND the URL from your browser window showing all of the uploaded files. Save this for
                    later.</p>
                <p style="text-align: center; font-style: italic;">Go to the next tab to continue.</p>
            </div>
            <div id="ex3" style="padding: 20px;">
                <h2 class="alert alert-info">Almost Finished. Don't skip this step</h2>
                <h3>Record Results and Remove Resources</h3>
                <p>Read through this section and make sure that you have saved all of the required screenshots before
                    you delete the resources. When you are finished, clean up the resources running on your
                    subscription.</p>
                <div id="ex3task1">
                    <h4>Task 1: Record results and upload to Canvas &nbsp;&nbsp; <span class="element_toggler btn"
                            role="button" aria-controls="ex3task1detail" aria-label="Toggler toggle list visibility"
                            aria-expanded="false"> show/hide detail </span></h4>
                    <div id="ex3task1detail" style="list-style: none; display: none;">
                        <ol>
                            <li>
                                <p>Navigage to the Azure portal and open your Storage Account &gt; Containers and the
                                    <code>images</code> container.</p>
                                <p class="ic-flash-info">Take a (third) screenshot of this page.</p>
                                <p>What do you notice about the resource Names?</p>
                            </li>
                            <li>
                                <p>Paste your 3 required screenshots into a new Microsoft Word document.</p>
                                <p>(optional) Add any observations or comments to the document, save and submit.</p>
                            </li>
                        </ol>
                    </div>
                </div>
                <div id="ex3task2">
                    <h4>Task 2: Clean up your Azure subscription &nbsp;&nbsp; <span class="element_toggler btn"
                            role="button" aria-controls="ex3task2detail" aria-label="Toggler toggle list visibility"
                            aria-expanded="false"> show/hide detail </span></h4>
                    <div id="ex3task2detail" style="list-style: none; display: none;">
                        <p>Open the Resource Groups and open the <code>ManagedPlatform</code> blade in the Azure portal.
                        </p>
                        <p>It is recommended to group related resources within Resource Groups, often by projects. In
                            this Group, there is an App Service plan, a Storage account, and two App Services. One of
                            these is an API, the other is a web app.</p>
                        <p>From the Cost Management &gt; Cost Analysis blade, you can see your forecast expenses of
                            using these. Since the storage is not high performance, or large content, the cost is below
                            any visible threshold. Likewise, I deployed both web apps on the Free Tier, so my usage and
                            forecast cost for this Resource Group is currently sitting at $0.</p>
                        <p>It's always important to track and manage your billable activity.</p>
                        <p>In this case, the next step is to simply delete the resources.</p>
                        <h4>Open Azure Cloud Shell</h4>
                        <ol>
                            <li>
                                <p>In the Azure portal, select the <strong>Cloud Shell</strong> icon to open a new Bash
                                    session. If Cloud Shell defaults to a PowerShell session, select
                                    <strong>PowerShell</strong>, and in the drop-down menu, select
                                    <strong>Bash</strong>.</p>
                                <blockquote>
                                    <p><span class="color-fg-accent">Note</span>: If this is the first time you're
                                        starting <strong>Cloud Shell</strong>, when prompted to select either
                                        <strong>Bash</strong> or <strong>PowerShell</strong>, select
                                        <strong>PowerShell</strong>. When you're presented with the <strong>You have no
                                            storage mounted</strong> message, select the subscription you're using in
                                        this lab, and then select <strong>Create storage</strong>.</p>
                                </blockquote>
                            </li>
                        </ol>
                        <h4>Delete resource groups</h4>
                        <ol>
                            <li>
                                <p>On the <strong>Cloud Shell</strong> pane, run the following command to delete the
                                    <strong>ManagedPlatform</strong> resource group:</p>
                                <div class="snippet-clipboard-content notranslate position-relative overflow-auto">
                                    <pre class="notranslate"><code>az group delete --name ManagedPlatform --no-wait --yes
    </code></pre>
                                </div>
                                <blockquote>
                                    <p><span class="color-fg-accent">Note</span>: The command executes asynchronously
                                        (as determined by the <em>--no-wait</em> parameter). While you'll be able to run
                                        another Azure CLI command immediately after the command executes, within the
                                        same Bash session, it'll take a few minutes before the resource groups are
                                        actually removed.</p>
                                </blockquote>
                            </li>
                            <li>
                                <p>Close the <strong>Cloud Shell</strong> pane in the portal.</p>
                            </li>
                        </ol>
                        <h4>Close the active applications</h4>
                        <ul>
                            <li>Close the currently running Microsoft Edge application.</li>
                        </ul>
                        <h4>Review</h4>
                        <p>In this exercise, you cleaned up your subscription by removing the resource groups used in
                            this lab.</p>
                        <p>It is worth noting that the resource group and all its associated resources could also be
                            deleted directly from the resource group blade in the portal.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>